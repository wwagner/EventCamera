# Event Camera Configuration
# Edit this file to configure event camera parameters

[Camera]
# Event camera bias settings
# These values control the analog biases in the event camera sensor
# Note: Ranges vary by bias type - see individual comments
bias_diff = 0         # Event detection threshold (-25 to 23) - recommended to not change
bias_diff_on = 20     # ON event threshold (-85 to 140)
bias_diff_off = 20    # OFF event threshold (-35 to 190)
bias_fo = 0           # Photoreceptor follower (-35 to 55) - output buffer strength
bias_hpf = 100        # High-pass filter (0 to 120) - removes DC component
bias_refr = 0         # Refractory period (-20 to 235) - prevents rapid re-triggering

# Frame generation settings
accumulation_time_us = 1000   # Event accumulation period in microseconds (100-100000 μs)
                             # Lower values = more responsive but noisier
                             # Higher values = smoother but more latency
                             # Common values:
                             #   200 μs   = 0.2 ms (ultra fast, very noisy)
                             #   1000 μs  = 1 ms (fast)
                             #   10000 μs = 10 ms (balanced, ~100 FPS)
                             #   33000 μs = 33 ms (~30 FPS, recommended)
                             #   100000 μs = 100 ms (10 FPS, smooth)

# Trail Filter settings
trail_filter_enabled = 0     # Enable trail filter by default (0=off, 1=on)
trail_filter_type = 2        # Filter type: 0=TRAIL, 1=STC_CUT_TRAIL, 2=STC_KEEP_TRAIL
trail_filter_threshold = 10000 # Threshold in microseconds

# Capture settings
capture_directory = C:\Users\wolfw\OneDrive\Desktop    # Directory for saving captured frames

# ImageJ streaming settings
imagej_streaming_enabled = 0                           # Enable real-time streaming to ImageJ (0=off, 1=on)
imagej_stream_fps = 10                                  # Frames per second to stream (1-30)
imagej_stream_directory = C:\Users\wolfw\OneDrive\Desktop\imagej_stream    # Directory for ImageJ streaming
imagej_max_stream_files = 100                          # Maximum number of files to keep (auto-cleanup)

[GeneticAlgorithm]
# GA Configuration
population_size = 30          # Number of genomes per generation (10-100)
num_generations = 20          # Number of generations to evolve (5-50)
mutation_rate = 0.15          # Probability of mutating each gene (0.01-0.5)
crossover_rate = 0.7          # Probability of crossover vs cloning (0.5-0.95)
frames_per_eval = 30          # Number of frames to capture per fitness evaluation (10-60)
                              # IMPORTANT: Must be >= 2 for temporal variance calculation
                              # Recommended: 30 for accurate fitness, 10 for faster optimization

# Parameters to optimize (0=fixed, 1=optimize)
optimize_bias_diff = 1
optimize_bias_refr = 1
optimize_bias_fo = 1
optimize_bias_hpf = 1
optimize_accumulation = 0
optimize_trail_filter = 0
optimize_antiflicker = 0
optimize_erc = 0

# Fitness evaluation settings
use_processed_pixels = 0          # Apply display processing before fitness evaluation (0=off, 1=on)
ga_binary_stream_mode = 3          # Binary stream mode: 1=DOWN [96-127], 2=UP [224-255], 3=UP_DOWN (both)

[Runtime]
# Runtime performance and timing constants
max_event_age_us = 100000           # Maximum event age in microseconds (100ms) before skipping batch
ga_frame_capture_wait_ms = 20       # Wait time between frame capture attempts (ms)
ga_frame_capture_max_attempts = 10  # Max attempts multiplier for frame capture (attempts = frames * this)
ga_parameter_settle_ms = 200        # Wait time for parameters to stabilize before capture (ms)
simulation_frame_delay_ms = 33      # Simulation mode frame delay (~30 FPS)
